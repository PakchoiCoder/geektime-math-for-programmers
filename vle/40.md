##### 40 | 线性回归（中）：如何使用最小二乘法进行直线拟合？

> 求解线性回归和普通的线性方程组最大的不同在于误差ε

在线性回归中，为了实现最小化 ε 的目标，我们可以使用最小二乘法进行直线的拟合。
最小二乘法通过最小化误差的平方和，来寻找和观测数据匹配的最佳函数。由于这些内容有些抽象，
下面我会结合一些例子来解释最小二乘法的核心思想，以及如何使用这种方法进行求解

#### 使用观测值拟合
拟合模型其实是指通过模型的假设和训练样本，推导出具体参数的过程。有了这些参数，我们就能对新的数据进行预测。而在线性回归中，我们需要找到观测数据之间的线性关系

由于我们假设ε的存在，因此在线性回归中，我们允许某条直线只穿过其中少量的点。不过，既然我们允许这种情况发生，那么就存在无穷多这样的直线。比如下面我随便画了几条，都是可以的

#### 最小二乘法
最小二乘法的主要思想就是求解未知参数，使得理论值与观测值之差（即误差，或者说残差）的平方和达到最小。我们可以使用下面这个公式来描述

1. 极值是一个函数的极大值或极小值。如果一个函数在一点的某个邻域内每个地方都有确定的值，而以该点所对应的值是最大（小）的，那么这函数在该点的值就是一个极大（小）值。
而函数的极值可以通过它的一阶和二阶导数来确定。对于一元可微函数 f(x)，它在某点 x0​ 有极值的充分必要条件是 f(x) 在 x0​ 的邻域上一阶可导，在 x0​ 处二阶可导，且一阶导数 f’(x0​)=0，二阶导数 f’’(x0​)​=0。
2. 其中 f’ 和 f’’ 分别表示一阶导数和二阶导数。在一阶导数 f’(x0)=0 的情况下，如果 f’’(x0)<0，则 f 在 x0​ 取得极大值；如果 f’’(x0)>0，则 f 在 x0​ 取得极小值。
3. 这就是为什么在求矩阵 B 的时候，我们要求 2X’XB−2X’Y 为 0，并且 2X’XB−2X’Y 的导数要大于 0，这样我们才能确保求得极小值

#### 总结
最小二乘法通过向量空间的欧氏距离之平方，定义了预测值和真实值之间的误差。
在给定自变量和因变量的观测值之后，最小二乘法可以帮助我们推导出所有自变量的系数，并最小化误差
