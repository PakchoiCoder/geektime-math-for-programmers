## 递归（下）：分而治之，从归并排序到MapReduce

递归思想在“分而治之”这个领域的应用,归并排序和快速排序都很好地体现了分治的思想

### 归并排序（merge sort）

把两个有序的数列合并起来，形成一个更大的有序数列。

在归并排序中引入了分而治之（Divide and Conquer）的思想

将一个复杂的问题，分解成两个甚至多个规模相同或类似的子问题，然后对这些子问题再进一步细分，直到最后的子问题变得很简单，很容易就能被求解出来，这样这个复杂的问题就求解出来了;归并排序使用了分治的思想，而这个过程需要使用递归来实现

### 分布式系统中的分治思想

- 数据分割和映射
分割是指将数据源进行切分，并将分片发送到 Mapper 上。映射是指 Mapper 根据应用的需求，将内容按照键 - 值的匹配，存储到哈希结构中。
MapReduce 采用了哈希映射来分配数据，而普通的分治或递归不一定需要。
- 归约
归约是指接受到的一组键值配对，如果是键内容相同的配对，就将它们的值归并。这和本机的递归调用后返回结果的过程类似。不过，由于哈希映射的关系，MapReduce 还需要洗牌的步骤，也就是将键 - 值的配对不断地发给对应的 Reducer 进行归约。普通的分治或递归不一定需要洗牌的步骤。
- 合并
为了提升洗牌阶段的效率，可以选择减少发送到归约阶段的键 - 值配对。具体做法是在数据映射和洗牌之间，加入合并的过程，在每个 Mapper 节点上先进行一次本地的归约。然后只将合并的结果发送到洗牌和归约阶段。这和本机的递归调用后返回结果的过程类似。

TODO: 需补充