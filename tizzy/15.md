
# 从树到图：如何让计算机学会看地图？

## 前言

我们经常使用手机上的地图导航 App，查找出行的路线。那计算机是如何在多个选择中找到最优解呢？换句话说，计算机是如何挑选出最佳路线的呢？

影响到达最终目的地的因素有很多，比如出行的交通工具、行驶的距离、每条道路的交通状况等等，因此，我们需要赋予到达目的地的每条边不同的权重。而我们想求的最佳路线，其实就是各边权重之和最小的通路。


- 广度优先搜索只测量通路的长度，而不考虑每条边上的权重。
- 我们需要先把交通地图转为图的模型。图中的每个结点表示一个地点，每条边表示一条道路或者交通工具的路线。其中，边是有向的，表示单行道等情况。其次，边是有权重的


## 基于广度优先或深度优先搜索的方法

从某个出发点，到图中任意一个其他结点的总耗时。

### 基本思路

- 从出发点开始，广度优先遍历每个点
- 当遍历到某个点的时候，如果该点还没有耗时的记录，记下当前这条通路的耗时。
- 如果该点之前已经有耗时记录了，那就比较当前这条通路的耗时是不是比之前少。如果是，那就用当前的替换掉之前的记录。


需要注意的是：
为了获取达到某个点的最短时间，我们必须遍历所有可能的路线，来取得最小值。
这也就是说，我们对某些结点的访问可能有多次。

第一，由于要遍历所有可能的通路，因此一个点可能会被访问多次。当然，这个“多次“是指某个结点出现在不同通路中，而不是多次出现在同一条通路中。因为我们不想让用户总是兜圈子，所以需要避免回路。

第二，如果某个结点 x 和起始点 s 之间存在多个通路，每当 x 到 s 之间的最优路线被更新之后，我们还需要更新所有和 x 相邻的结点之最优路线，计算复杂度会很高。

## 使用Dijkstra 算法来计算权重最低的节点距离

### Dijkstra 算法的核心思想

对于某个结点，如果我们已经发现了最优的通路，那么就无需在将来的步骤中，再次考虑这个结点

### Dijkstra 算法的主要步骤

第一步，查找最小 mw。
第二步，更新权重。
...
重复上述两步，再次从 mw 中找出最小值，此时要求 mw 对应的结点不属于 F，重复上述动作，直到集合 F 包含了图的所有结点，也就是说，没有结点需要处理了。


