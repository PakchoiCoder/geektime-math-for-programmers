# 29 | 归一化和标准化：各种特征如何综合才是最合理的？


## 前言 

在众多的特征中，选取更有价值的特征，以提升模型的效率。特征选择是特征工程中的重要步骤。

特征工程中的`数值变换`

使用统计中的数据分布，对连续型的数值特征进行转换，让多个特征的结合更有效。
 


## 为什么需要特征变换？

原因：

不同类型的特征值没有转换到同一个可比较的范围内，所以线性回归后所得到的系数不具有可比性，因此我们无法直接对这些权重加以解释。

单一的线性回归仅仅只能对单个特征进行数据分析，而无法对多个特征综合起来进行分析数据，单个特征分析的数据容易对数据分析产生不合理的分析特点。




多重回归分析

研究一个或多个随机变量 y1​，y2​，…，yi​ 与另一些变量 x1​，x2​，…，xk​ 之间关系的统计方法

我们将 y1​，y2​，…，yi​ 称为因变量，x1​，x2​，…，xk​ 称为自变量



- 如果因变量和自变量为线性关系时，就称为线性回归模型；

- 如果因变量和自变量为非线性关系，则称为非线性回归分析模型。


多元线性回归

![](https://static001.geekbang.org/resource/image/13/70/1350fcaad0a241fae13896bf85fa4d70.png)



x1​，x2​，…，xn​ 是自变量，y 是因变量，ε 是随机误差，通常假定随机误差的均值为 0。而 w0 是截距，w1​，w_{2，…，wn​ 是每个自变量的系数，表示每个自变量对最终结果的影响是正面还是负面，以及影响的程度。

如果某个系数大于 0，表示对应的自变量对结果是正面影响，这个自变量越大，结果就越大。

否则就是负面影响，这个自变量越大，结果就越小。

系数的绝对值表示了影响程度的大小，如果绝对值趋于 0，表示基本没有影响。

`注： 不同字段的数据没有可比性`


## 两种常见的特征变换方法

### 归一化


获取原始数据的最大值和最小值，然后把原始值线性变换到 [0,1] 之间，具体的变换函数为：

![](https://static001.geekbang.org/resource/image/0f/1e/0ff408fa0e7a547d2a874a76e39cc31e.png)

其中 x 是原始值，max 为样本数据的最大值，min 为样本数据的最小值，x’ 是变换后的值。这种方法有个不足最大值与最小值非常容易受噪音数据的影响。

### 标准化

基于正态分布的 z 分数（z-score）标准化（Standardization）。该方法假设数据呈现标准正态分布。

#### 正态分布

正态分布是连续随机变量概率分布的一种。在现实生活中，大量随机现象的数据分布都近似于正态分布。

##### 特点

以经过平均数的垂线为轴，左右对称展开，中间点最高，然后逐渐向两侧下降，分布曲线和 x 轴组成的面积为 1，表示不同事件出现的概率和为 1。平均数和标准差是正态分布的关键参数，它们会决定分布的具体形态。而标准正态分布是正态分布的一种，平均数为 0，标准差为 1。


##### z 分数

z 分数这个方法是如何运作的。实际上，z 分数标准化是利用标准正态分布的特点，计算一个给定分数距离平均数有多少个标准差。它的具体转换公式如下：

![](https://static001.geekbang.org/resource/image/af/01/af7092087da728c5c36819cf2ae68f01.png)

其中 x 为原始值，u 为均值，σ 为标准差，x’ 是变换后的值。


z 分数的转换，高于平均数的分数会得到一个正的标准分，而低于平均数的分数会得到一个负的标准分数。更重要的是，转换后的数据是符合标准正态分布的。

和归一化相比，z 分数这样的标准化不容易受到噪音数据的影响，并且保留了各维特征对目标函数的影响权重。





