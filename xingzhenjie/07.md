# 07 | 排列：如何让计算机学会“田忌赛马”？

## 排列

* 从n个不同的元素中取出m（1≤m≤n）个不同的元素，按照一定的顺序排成一列，这个过程就叫排列。
* 当m=n这种情况出现时，叫做全排列。
* 如果选出的这m个元素可以有重复的，叫做重复排列。否则就是不重复排列。

## 如何让计算机为田忌安排赛马？

* 首先，在不同选马阶段，都要保存已经有几匹马出战，它们的排列顺序，以及还剩几匹没有选择。
* 其次，比较每种马的水平，确保每种马的差距不大。
* 然后列出优劣比较的公式。
* 最终输出的结果就可以满足要求，获得胜利。

**这些都是建立在已知齐王出战顺序的情况下，如果齐王随机出战，结果将不可控。**

## 暴力破解密码如何使用排列思想？

在概率中，排列有很大的作用，因为排列会帮助我们列举出随机变量取汁的所有可能性，用于生成这个变量的概率分布。

暴力破解法：就是利用排列的方法，穷举出所有的可能性，然后逐一去验证，直到得到正确答案。

******

**回溯算法也叫试探法，它是一种系统地搜索问题的解的方法。**

用回溯算法解决问题的一般步骤：

1. 针对所给问题，定义问题的解空间，它至少包含问题的一个（最优）解。
2. 确定易于搜索的解空间结构,使得能用回溯法方便地搜索整个解空间 。
3. 以深度优先的方式搜索解空间，并且在搜索过程中用剪枝函数避免无效搜索。

#### 经典问题

**八皇后问题：**在8×8格的国际象棋上摆放八个皇后，使其不能互相攻击，即任意两个皇后都不能处于同一行、同一列或同一斜线上，问有多少种摆法。

JS解法：

```
function queen(a,cur) {
	if (cur == a.length) {console.log(a);return}
	for (var i = 0; i < a.length; i++) {
		a[cur] = i;
		var flag = true;
		for (var j = 0; j < cur; j++) {
			var ab = i - a[j];
			if (a[j] == i||(ab>0 ? ab : -ab) == cur - j) {flag = false;break}
		}
		if (flag) {queen(a,cur+1)}
	}
}

queen([1,1,1,1,1,1,1,1],0) //将会打印92种结果
```
