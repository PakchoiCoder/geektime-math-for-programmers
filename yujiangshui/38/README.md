# 38 | 矩阵（下）：如何使用矩阵操作进行协同过滤推荐？

推荐系统中至少有两个重要角色：用户和物品。用户是系统的使用者，物品就是将要被推荐的候选对象。

一个好的推荐算法需要充分挖掘用户和物品之间的关系，可以通过矩阵来表示这种二元关系。

比如一个矩阵，每一行表示一个用户，每一列表示每个物品，数值表示当前用户对该物品的喜好程度。我们可以通过多种途径来归一化计算出喜好程度，比如是否购买、是否评论和打分、是否多次访问和浏览、是否加入购物车、分享等等，需要注意的是需要根据用户本身的情况对数据进行归一化处理，比如有的用户比较宽容，默认全部是好评，就需要对好评对应的喜好值进行减少。

协同过滤（Collaborative Filtering）主要思路就是利用已有用户群过去的行为或意见，预测当前用户最可能喜欢哪些东西，根据推荐一句和传播的途径，又可以进一步基于用户过滤和基于物品过滤。

## 基于用户过滤

基于用户的购物记录，寻找相似偏好的用户，然后进行推荐。用户 A 访问了物品 A 和 C，用户 B 访问了物品 B，用户 C 访问了物品 A，C 和 D。我们计算出来，用户 C 是 A 的近邻，而 B 不是。因此系统会更多地向用户 A 推荐用户 C 访问的物品 D。

那么就可以基于如下公式计算出用户之间的相似度和用户对物品的喜好度：

![](https://static001.geekbang.org/resource/image/7c/7a/7c8a337dc6e0db7b47d1bc726965d67a.png)

![](https://static001.geekbang.org/resource/image/7c/7a/7c8a337dc6e0db7b47d1bc726965d67a.png)

第二个公式，得知两个用户之间偏好相似度，然后计算另一个用户对某个物品的喜好，可以得出当前用户的喜好。

由公式可以看出，如果相似度越大，喜好度就会越大。

## 基于物品的过滤

基于用户访问过的物品进行预测。物品 A 和 C 因为都被用户 A 和 B 同时访问，因此它们被认为相似度更高。当用户 C 访问过物品 A 后，系统会更多地向用户推荐物品 C，而不是其他物品。

类似上面的公式。
