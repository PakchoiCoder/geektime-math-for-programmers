# 06 | 递归（下）：分而治之，从归并排序到 MapReduce

## 归并排序中的分治思想

在排序算法中，归并排序和快速排序都很好的体现了分治的思想，比如归并排序（merge sort）。

在排序一个集合时 {7, 6, 2, 4, 1, 9, 3, 8, 0, 5}，我们可以拆成两个步骤：

1. 如果当前集合大于 2 个元素，就对集合拆分，拆分成 n/2 个元素的两个集合
2. 针对集合内的 1 到 2 个元素进行排序，并返回结果
3. 针对结果进行二次排序并继续返回，此时排序只需要两个集合依次读取最小值即可，因为已经排好了

归并排序使用了分治的思想，整个过程需要使用递归来实现。通过中间变量保存相关结果。

## 分布式系统中分治的应用

比如 MapReduce，先将数据集进行分割并发送到各个子节点，在子节点上面进行运算和处理，并且回传处理结果，合并成最终的结果。

![](https://static001.geekbang.org/resource/image/78/31/78eefc6b61bad62f257f2b5e4972f031.jpg)

分治主要就是用在将复杂问题转化为若干个规模相当的小问题上。分治思想通常包括 问题的细分 和 结果的合并，正好对应于递归编程的函数嵌套调用和函数结果的返回。细分后的问题交给嵌套调用的函数去解决，而结果合并之后交由函数进行返回。所以，分治问题适合使用递归来实现。同时，分治的思想也可以帮助我们设计分布式系统和并行计算，细分后的问题交给不同的机器来处理，而其中的某些机器专门负责收集来自不同机器的处理结果，完成结果的合并。

## 总结

递归采用了和数学归纳法类似的思想，但是它用的是逆向递推，化繁为简，把复杂的问题逐步简化。再加上分治原理，我们就可以更有效地把问题细分，进行并行化的处理。

基本的编写递归的流程，就是需要搞明白最基础问题是什么，并写出处理逻辑，之后再加上递归控制逻辑实现需求。
