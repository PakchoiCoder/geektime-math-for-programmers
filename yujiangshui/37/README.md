# 37 | 矩阵（上）：如何使用矩阵操作进行 PageRank 计算？

从数据结构的角度来看，我们可以把向量看作一维数组，把矩阵看作二维数组。

通过矩阵上的各种预算操作，就可以挖掘这些二元关系，实现不同目的。

## 通过矩阵计算实现 PageRank 算法

PageRank 是基于马尔科夫链的。它假设了一个“随机冲浪者”模型，冲浪者从某张网页出发，根据 Web 图中的链接关系随机访问。在每个步骤中，冲浪者都会从当前网页的链出网页中，随机选取一张作为下一步访问的目标。此外，PageRank 还引入了随机的跳转操作，这意味着冲浪者不是按 Web 图的拓扑结构走下去，只是随机挑选了一张网页进行跳转。

一开始对所有网页结点的初始值设为 1 然后开始进行循环计算然后更新结点值，之后再用新的结点值继续循环计算更新。直到达到一个稳定的数值。

### 简化 PageRank 公式

暂不考虑随机跳转的情况，那么公式就简化成了：

![](https://static001.geekbang.org/resource/image/b6/05/b6f8fc1f6e8b144e3d9e6a0d99da1c05.png)

结合矩阵点乘的公式：

![](https://static001.geekbang.org/resource/image/5b/fc/5bb501ed32b7f9882fd71baf3d4f92fc.png)

就可以分解成两个矩阵的点乘。一个矩阵就是每张网页的 PageRank 得分，另一个矩阵就是邻接矩阵，就是表示图结点相邻关系的矩阵。

对于一个拓扑图可以得到一个邻接矩阵，第 i 行、第 j 列的元素值表示是否存在从 i 到 j 的连接，如果有就是 1 否则是 0。

之后再用默认的矩阵和邻接矩阵进行运算得到结果。

### 考虑随机跳转

加入随机跳转机制后的公式可以分解成两个矩阵的点乘：

![](https://static001.geekbang.org/resource/image/ea/af/eaf0b4fb41e70cc39dc534a457c2a9af.png)

之后就可以套入数据进行计算和更新迭代、归一化处理，直到趋于稳定。
